before_script:
  - dpkg --add-architecture i386
  - apt-get update -qq && apt-get install -y -qq ftjam gcc g++ wget bsdtar clang libstdc++6:i386 libgcc1:i386 zlib1g:i386 libncurses5:i386 > /dev/null 2>&1
  - mkdir -v toolchains
  - sh -c "cd toolchains && wget -q http://releases.linaro.org/components/toolchain/binaries/latest-5/aarch64_be-linux-gnu/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu.tar.xz && tar -xJf gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu.tar.xz"

raspberrypiplatform_and_tests_pigpioversion:
  script:
    - ftjam -sDEBUG=yes -sMULETARGET=rpi -sMULECOMPILERFLAGS="-march=armv8-a -mtune=cortex-a53 -static-libstdc++ -static-libgcc" -sLINKFLAGS="-march=armv8-a -mtune=cortex-a53 -static-libstdc++ -static-libgcc" -sCC=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-gcc -sCXX=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -sLINK=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -q all
    - $PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -std=gnu++11 -g -Os -static-libstdc++ -static-libgcc -march=armv8-a -mtune=cortex-a53 tests/test01-muleapplication-test.cpp libMule.a -Isrc -o tests/run-test01
    - $PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -std=gnu++11 -g -Os -static-libstdc++ -static-libgcc -march=armv8-a -mtune=cortex-a53 tests/test02-mulefile-currentdirectory.cpp libMule.a -Isrc -o tests/run-test02
    - $PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -std=gnu++11 -g -Os -static-libstdc++ -static-libgcc -march=armv8-a -mtune=cortex-a53 tests/test03-mulesound-beeping.cpp libMule.a -Isrc -o tests/run-test03
    - ftjam -sDEBUG=yes -sMULETARGET=rpi -sMULECOMPILERFLAGS="-march=armv8-a -mtune=cortex-a53 -static-libstdc++ -static-libgcc" -sLINKFLAGS="-march=armv8-a -mtune=cortex-a53 -static-libstdc++ -static-libgcc" -sCC=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-gcc -sCXX=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -sLINK=$PWD/toolchains/gcc-linaro-5.5.0-2017.10-x86_64_aarch64_be-linux-gnu/bin/aarch64_be-linux-gnu-g++ -q clean
    - rm -r -f -v tests/run-test0* src/core/muleconfig.*

